<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalhes - HMD Tracking</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="logo-container">
            <img src="images/logo.jpg" alt="Logo HMD" class="logo">
            <h1>Tracking - Detalhes</h1>
        </div>

        <div id="conteudo">
            <!-- O conteúdo será carregado dinamicamente aqui -->
        </div>
    </div>

    <script>
        function obterCodigoDaURL() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('codigo');
        }

        function carregarConteudo() {
            const codigo = obterCodigoDaURL();

            if (!codigo) {
                alert("Código não encontrado.");
                return;
            }

            // Caminho para os arquivos de conteúdo
            const conteudoUrl1 = `conteudo/${codigo}/FLDados.txt`;
            const conteudoUrl2 = `conteudo/${codigo}/FT2Dados.txt`;
            const conteudoUrl3 = `conteudo/${codigo}/FT3Dados.txt`;
            const conteudoUrl4 = `conteudo/${codigo}/FTDados.txt`;
            const conteudoUrl5 = `conteudo/${codigo}/SZADRS_Dados.txt`;

            // Carregar os cinco arquivos
            Promise.all([
                fetch(conteudoUrl1).then(response => response.ok ? response.text() : Promise.reject("Arquivo FLDados.txt não encontrado")),
                fetch(conteudoUrl2).then(response => response.ok ? response.text() : Promise.reject("Arquivo FT2Dados.txt não encontrado")),
                fetch(conteudoUrl3).then(response => response.ok ? response.text() : Promise.reject("Arquivo FT3Dados.txt não encontrado")),
                fetch(conteudoUrl4).then(response => response.ok ? response.text() : Promise.reject("Arquivo FTDados.txt não encontrado")),
                fetch(conteudoUrl5).then(response => response.ok ? response.text() : Promise.reject("Arquivo SZADRS_Dados.txt não encontrado"))
            ])
            .then(([dadosFL, dadosFT2, dadosFT3, dadosFT, dadosSZADRS]) => {
                const dados1 = processarConteudoFL(dadosFL);
                const dados2 = processarConteudoFT2(dadosFT2);
                const dados3 = processarConteudoFT3(dadosFT3);
                const dados4 = processarConteudoFT(dadosFT);
                const dados5 = processarConteudoSZADRS(dadosSZADRS);
                exibirDados(dados1, dados2, dados3, dados4, dados5);
            })
            .catch(error => {
                alert(error);
                console.error(error);
            });
        }

        // Processar conteúdo de FLDados.txt
        function processarConteudoFL(conteudo) {
            const dados = {};
            const linhas = conteudo.split('\n');
            linhas.forEach(linha => {
                if (linha.includes('Nome Expedidor Origem:')) {
                    dados.nomeExpedidor = linha.split(':')[1]?.trim() || 'Não disponível';
                } else if (linha.includes('No Expedidor Origem:')) {
                    dados.numeroExpedidor = linha.split(':')[1]?.trim() || 'Não disponível';
                } else if (linha.includes('Morada Expedidor Origem:')) {
                    dados.moradaExpedidor = linha.split(':')[1]?.trim() || 'Não disponível';
                } else if (linha.includes('Código Postal Expedidor Origem:')) {
                    dados.codigoPostal = linha.split(':')[1]?.trim() || 'Não disponível';
                } else if (linha.includes('Local Expedidor Origem:')) {
                    dados.localExpedidor = linha.split(':')[1]?.trim() || 'Não disponível';
                } else if (linha.includes('Telefone Expedidor Origem:')) {
                    dados.telefoneExpedidor = linha.split(':')[1]?.trim() || 'Não disponível';
                } else if (linha.includes('Email Expedidor Origem:')) {
                    dados.emailExpedidor = linha.split(':')[1]?.trim() || 'Não disponível';
                }
            });
            return dados;
        }

        // As outras funções de processamento seguem a mesma lógica...

        // Exibir os dados na página
        function exibirDados(dados1, dados2, dados3, dados4, dados5) {
            const conteudoDiv = document.getElementById("conteudo");
            conteudoDiv.innerHTML = `
                <h2>FL Dados</h2>
                <ul>
                    <li>Nome Expedidor: ${dados1.nomeExpedidor}</li>
                    <li>Nr. Expedidor: ${dados1.numeroExpedidor}</li>
                    <li>Morada Expedidor: ${dados1.moradaExpedidor}</li>
                    <li>Código Postal: ${dados1.codigoPostal}</li>
                    <li>Local: ${dados1.localExpedidor}</li>
                    <li>Telefone: ${dados1.telefoneExpedidor}</li>
                    <li>Email: ${dados1.emailExpedidor}</li>
                </ul>

                <h2>FT2 Dados</h2>
                <ul>
                    <li>m3: ${dados2.m3}</li>
                    <li>Zona Expedição: ${dados2.zonaExpedicao}</li>
                    <li>Volumes a Expedir: ${dados2.volumesExpedir}</li>
                    <li>Nr. Reserva: ${dados2.numeroReserva}</li>
                    <li>Peso: ${dados2.peso}</li>
                    <li>Ldm: ${dados2.ldm}</li>
                    <li>Multiplas Recolhas?: ${dados2.multiplasRecolhas}</li>
                </ul>

                <!-- Continue com os outros dados -->
            `;
        }

        // Carregar os dados assim que a página for carregada
        window.onload = carregarConteudo;
    </script>
</body>
</html>
