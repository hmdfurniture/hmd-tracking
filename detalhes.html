<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalhes - HMD Tracking</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="logo-container">
            <img src="images/logo.jpg" alt="Logo HMD" class="logo">
            <h1>Tracking - Detalhes</h1>
        </div>

        <div id="conteudo">
            <!-- O conteúdo será carregado dinamicamente aqui -->
        </div>
    </div>

    <script>
        function obterCodigoDaURL() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('codigo');
        }

        function carregarConteudo() {
            const codigo = obterCodigoDaURL();

            if (!codigo) {
                alert("Código não encontrado.");
                return;
            }

            // Caminho para a pasta de conteúdo
            const conteudoUrl = `conteudo/${codigo}/FLDados.txt`;

            // Carregar o conteúdo do arquivo FLDados.txt
            fetch(conteudoUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error("Arquivo não encontrado.");
                    }
                    return response.text();
                })
                .then(conteudo => {
                    const dados = processarConteudo(conteudo);
                    exibirDados(dados);
                })
                .catch(error => {
                    alert("Erro ao carregar o conteúdo.");
                    console.error(error);
                });
        }

        function processarConteudo(conteudo) {
            const dados = {};

            // Dividir o conteúdo em linhas
            const linhas = conteudo.split('\n');
            linhas.forEach(linha => {
                if (linha.includes('Nome Expedidor Origem:')) {
                    dados.nomeExpedidor = linha.replace('Nome Expedidor Origem:', '').trim();
                } else if (linha.includes('No Expedidor Origem:')) {
                    dados.numeroExpedidor = linha.replace('No Expedidor Origem:', '').trim();
                } else if (linha.includes('Morada Expedidor Origem:')) {
                    dados.moradaExpedidor = linha.replace('Morada Expedidor Origem:', '').trim();
                } else if (linha.includes('Código Postal Expedidor Origem:')) {
                    dados.codigoPostal = linha.replace('Código Postal Expedidor Origem:', '').trim();
                } else if (linha.includes('Local Expedidor Origem:')) {
                    dados.localExpedidor = linha.replace('Local Expedidor Origem:', '').trim();
                } else if (linha.includes('Telefone Expedidor Origem:')) {
                    dados.telefoneExpedidor = linha.replace('Telefone Expedidor Origem:', '').trim();
                } else if (linha.includes('Email Expedidor Origem:')) {
                    dados.emailExpedidor = linha.replace('Email Expedidor Origem:', '').trim();
                }
            });

            return dados;
        }

        function exibirDados(dados) {
            const conteudoDiv = document.getElementById('conteudo');
            
            // Adicionar os rótulos e valores dos dados
            conteudoDiv.innerHTML = `
                <h2>Detalhes para o código ${obterCodigoDaURL()}</h2>
                <div>
                    <label>Nome Expedidor:</label><p>${dados.nomeExpedidor}</p>
                    <label>Número Expedidor:</label><p>${dados.numeroExpedidor}</p>
                    <label>Morada Expedidor:</label><p>${dados.moradaExpedidor}</p>
                    <label>Código Postal:</label><p>${dados.codigoPostal}</p>
                    <label>Local:</label><p>${dados.localExpedidor}</p>
                    <label>Telefone:</label><p>${dados.telefoneExpedidor}</p>
                    <label>Email:</label><p>${dados.emailExpedidor}</p>
                </div>
            `;
        }

        // Chama a função para carregar o conteúdo quando a página carregar
        window.onload = carregarConteudo;
    </script>
</body>
</html>
